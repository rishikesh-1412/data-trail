{"ast":null,"code":"var _jsxFileName = \"/Users/rishikeshmungase/Desktop/Pubmatic/React/data_trail/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useCallback } from \"react\";\nimport ReactFlow, { MiniMap, Controls, Background, useNodesState, useEdgesState, MarkerType } from \"reactflow\";\nimport dagre from \"dagre\";\nimport \"reactflow/dist/style.css\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst dagreGraph = new dagre.graphlib.Graph();\ndagreGraph.setDefaultEdgeLabel(() => ({}));\nconst nodeWidth = 320;\nconst nodeHeight = 80;\n\n// ---- DATA ----\nconst dependencies = [{\n  view: \"AudienceBuyerDaily\",\n  input: \"BuyerETLVA1\"\n}, {\n  view: \"AudienceBuyerDaily\",\n  input: \"BuyerETLVA2\"\n}, {\n  view: \"AudienceBuyerMonthly\",\n  input: \"Audience_Gladiator_Daily_GrpSet_5_pub_geo_aud_plat_ad_uid\"\n}, {\n  view: \"AudienceBuyerMonthly\",\n  input: \"Audience_Gladiator_Daily_GrpSet_6_pub_geo_aud_plat_ad_uid_url\"\n}, {\n  view: \"AudienceBuyerMonthly\",\n  input: \"Audience_Gladiator_Daily_GrpSet_3_aud_uid\"\n}, {\n  view: \"AudienceBuyerMonthly\",\n  input: \"Audience_Gladiator_Daily_GrpSet_4_geo_aud_uid\"\n}, {\n  view: \"AudienceBuyerMonthly\",\n  input: \"Audience_Gladiator_Daily_GrpSet_2_pub_aud_uid\"\n}, {\n  view: \"AudienceBuyerMonthly\",\n  input: \"Audience_Gladiator_Daily_GrpSet_1_pub_geo_aud_uid\"\n}, {\n  view: \"AudienceBuyerContextual\",\n  input: \"Audience_Gladiator_Daily_GrpSet_1_pub_geo_aud_uid\"\n}, {\n  view: \"AudienceBuyerContextual\",\n  input: \"Audience_Gladiator_Daily_GrpSet_2_pub_aud_uid\"\n}, {\n  view: \"AudienceBuyerContextual\",\n  input: \"Audience_Gladiator_Daily_GrpSet_3_aud_uid\"\n}, {\n  view: \"AudienceBuyerContextual\",\n  input: \"Audience_Gladiator_Daily_GrpSet_4_geo_aud_uid\"\n}, {\n  view: \"AudienceBuyerContextual\",\n  input: \"Audience_Gladiator_Daily_GrpSet_5_pub_geo_aud_plat_ad_uid\"\n}, {\n  view: \"AudienceBuyerContextual\",\n  input: \"Audience_Gladiator_Daily_GrpSet_6_pub_geo_aud_plat_ad_uid_url\"\n}, {\n  view: \"BuyerETLVA1\",\n  input: \"FULL_RAW_ETL\"\n}, {\n  view: \"BuyerETLVA2\",\n  input: \"FULL_RAW_ETL\"\n}, {\n  view: \"AudStoreMonthly\",\n  input: \"AudStoreMonthlyLatestUsers\"\n}, {\n  view: \"AudStoreMonthlyPivotMySqlUpload\",\n  input: \"AudStoreMonthly\"\n}, {\n  view: \"AudTrackerHourly\",\n  input: \"RAW_AUD_TRACKER\"\n}, {\n  view: \"ComplexAudienceDaily\",\n  input: \"AudStoreMonthlyLatestUsers\"\n}, {\n  view: \"DomainDataCardinalityReductionDaily\",\n  input: \"ETL_VERIFIED_API\"\n}, {\n  view: \"AudienceDataCardinalityReductionDaily\",\n  input: \"ETL_VERIFIED_API\"\n}, {\n  view: \"AudienceGladiatorCardinalityReductionDaily\",\n  input: \"Audience_Gladiator_ETL_Store_Join\"\n}, {\n  view: \"DomainDataCardinalityReductionCoalesce\",\n  input: \"DomainDataCardinalityReductionDaily\"\n}, {\n  view: \"AudienceDataCardinalityReductionCoalesce\",\n  input: \"AudienceDataCardinalityReductionDaily\"\n}, {\n  view: \"AudienceDataCardinalityReductionCoalesce\",\n  input: \"AudienceGladiatorCardinalityReductionDaily\"\n}, {\n  view: \"Audience_Gladiator_BuyerETLVA1\",\n  input: \"FULL_RAW_ETL\"\n}, {\n  view: \"Audience_Gladiator_BuyerETLVA2\",\n  input: \"FULL_RAW_ETL\"\n}, {\n  view: \"Audience_Gladiator_24HrsETL_Aggr\",\n  input: \"Audience_Gladiator_BuyerETLVA1\"\n}, {\n  view: \"Audience_Gladiator_24HrsETL_Aggr\",\n  input: \"Audience_Gladiator_BuyerETLVA2\"\n}, {\n  view: \"Audience_Gladiator_30DaysAudStore_Aggr\",\n  input: \"AudStoreMonthlyLatestUsers\"\n}, {\n  view: \"Audience_Gladiator_ETL_Store_Join\",\n  input: \"Audience_Gladiator_30DaysAudStore_Aggr\"\n}, {\n  view: \"Audience_Gladiator_ETL_Store_Join\",\n  input: \"Audience_Gladiator_24HrsETL_Aggr\"\n}, {\n  view: \"AudStoreMonthlyLatestUsers\",\n  input: \"AudStoreHourly\"\n}, {\n  view: \"AudStoreMonthlyLatestUsers\",\n  input: \"AudStoreMonthlyLatestUsers\"\n}, {\n  view: \"AudStoreHourly\",\n  input: \"AudStoreHourly\"\n}, {\n  view: \"AudStoreHourly\",\n  input: \"RAW_AUD_LOGGER\"\n}, {\n  view: \"Audience_Gladiator_Daily_GrpSet_5_pub_geo_aud_plat_ad_uid\",\n  input: \"Audience_Gladiator_ETL_Store_Join\"\n}, {\n  view: \"Audience_Gladiator_Daily_GrpSet_6_pub_geo_aud_plat_ad_uid_url\",\n  input: \"Audience_Gladiator_ETL_Store_Join\"\n}, {\n  view: \"Audience_Gladiator_Daily_GrpSet_3_aud_uid\",\n  input: \"Audience_Gladiator_ETL_Store_Join\"\n}, {\n  view: \"Audience_Gladiator_Daily_GrpSet_4_geo_aud_uid\",\n  input: \"Audience_Gladiator_ETL_Store_Join\"\n}, {\n  view: \"Audience_Gladiator_Daily_GrpSet_2_pub_aud_uid\",\n  input: \"Audience_Gladiator_ETL_Store_Join\"\n}, {\n  view: \"Audience_Gladiator_Daily_GrpSet_1_pub_geo_aud_uid\",\n  input: \"Audience_Gladiator_ETL_Store_Join\"\n}, {\n  view: \"Audience_Gladiator_Daily_GrpSet_5_pub_geo_aud_plat_ad_uid\",\n  input: \"AudienceBuyerDaily\"\n}, {\n  view: \"Audience_Gladiator_Daily_GrpSet_6_pub_geo_aud_plat_ad_uid_url\",\n  input: \"AudienceBuyerDaily\"\n}, {\n  view: \"Audience_Gladiator_Daily_GrpSet_3_aud_uid\",\n  input: \"AudienceBuyerDaily\"\n}, {\n  view: \"Audience_Gladiator_Daily_GrpSet_4_geo_aud_uid\",\n  input: \"AudienceBuyerDaily\"\n}, {\n  view: \"Audience_Gladiator_Daily_GrpSet_2_pub_aud_uid\",\n  input: \"AudienceBuyerDaily\"\n}, {\n  view: \"Audience_Gladiator_Daily_GrpSet_1_pub_geo_aud_uid\",\n  input: \"AudienceBuyerDaily\"\n}];\n\n// ---- DAG LAYOUT ----\nconst getLayoutedElements = (nodes, edges) => {\n  dagreGraph.setGraph({\n    rankdir: \"TB\",\n    ranksep: 150,\n    nodesep: 80\n  });\n  nodes.forEach(node => {\n    dagreGraph.setNode(node.id, {\n      width: nodeWidth,\n      height: nodeHeight\n    });\n  });\n  edges.forEach(edge => {\n    dagreGraph.setEdge(edge.source, edge.target);\n  });\n  dagre.layout(dagreGraph);\n  nodes.forEach(node => {\n    const nodeWithPos = dagreGraph.node(node.id);\n    node.position = {\n      x: nodeWithPos.x - nodeWidth / 2,\n      y: nodeWithPos.y - nodeHeight / 2\n    };\n    node.draggable = true;\n  });\n  return {\n    nodes,\n    edges\n  };\n};\n\n// ---- BUILD NODES & EDGES ----\nconst nodeIds = [...new Set(dependencies.flatMap(d => [d.view, d.input]))];\nconst rawNodes = nodeIds.map(id => ({\n  id,\n  data: {\n    label: id\n  },\n  position: {\n    x: 0,\n    y: 0\n  },\n  style: {\n    padding: 10,\n    borderRadius: 8,\n    background: \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\",\n    color: \"black\",\n    fontSize: 15,\n    fontWeight: 600,\n    minWidth: nodeWidth,\n    maxWidth: 620,\n    height: nodeHeight,\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    overflowX: \"auto\",\n    whiteSpace: \"nowrap\",\n    cursor: \"grab\"\n  }\n}));\nconst rawEdges = dependencies.map(d => ({\n  id: `e-${d.input}->${d.view}`,\n  source: d.input,\n  target: d.view,\n  animated: false,\n  style: {\n    stroke: \"grey\",\n    strokeWidth: 2\n  },\n  markerEnd: {\n    type: MarkerType.ArrowClosed,\n    color: \"grey\"\n  }\n}));\n\n// apply dagre layout once at the start\nconst {\n  nodes: initialNodes,\n  edges: initialEdges\n} = getLayoutedElements(rawNodes, rawEdges);\n\n// ---- UTILS FOR HIGHLIGHT ----\nconst buildParentMap = edges => {\n  const parentMap = {};\n  edges.forEach(e => {\n    if (!parentMap[e.target]) parentMap[e.target] = [];\n    parentMap[e.target].push(e.source);\n  });\n  return parentMap;\n};\nconst getAllAncestors = (nodeId, parentMap) => {\n  const visited = new Set();\n  const stack = [nodeId];\n  const ancestorEdges = [];\n  while (stack.length > 0) {\n    const current = stack.pop();\n    const parents = parentMap[current] || [];\n    parents.forEach(p => {\n      ancestorEdges.push({\n        source: p,\n        target: current\n      });\n      if (!visited.has(p)) {\n        visited.add(p);\n        stack.push(p);\n      }\n    });\n  }\n  return ancestorEdges;\n};\n\n// ---- MAIN APP ----\nexport default function App() {\n  _s();\n  const [nodes, setNodes, onNodesChange] = useNodesState(initialNodes);\n  const [edges, setEdges, onEdgesChange] = useEdgesState(initialEdges);\n  const parentMap = buildParentMap(initialEdges);\n  const onNodeClick = useCallback((_, node) => {\n    const ancestorEdges = getAllAncestors(node.id, parentMap);\n    setEdges(eds => eds.map(e => {\n      const isHighlighted = ancestorEdges.some(ae => ae.source === e.source && ae.target === e.target);\n      if (isHighlighted) {\n        return {\n          ...e,\n          animated: true,\n          style: {\n            stroke: \"red\",\n            strokeWidth: 4,\n            strokeDasharray: \"5 5\"\n          },\n          markerEnd: {\n            type: MarkerType.ArrowClosed,\n            color: \"violet\"\n          }\n        };\n      }\n      return {\n        ...e,\n        animated: false,\n        style: {\n          stroke: \"grey\",\n          strokeWidth: 2\n        },\n        markerEnd: {\n          type: MarkerType.ArrowClosed,\n          color: \"grey\"\n        }\n      };\n    }));\n  }, [setEdges, parentMap]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      width: \"100vw\",\n      height: \"100vh\"\n    },\n    children: /*#__PURE__*/_jsxDEV(ReactFlow, {\n      nodes: nodes,\n      edges: edges,\n      onNodesChange: onNodesChange,\n      onEdgesChange: onEdgesChange,\n      onNodeClick: onNodeClick,\n      fitView: true,\n      nodesDraggable: true,\n      children: [/*#__PURE__*/_jsxDEV(MiniMap, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 222,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Controls, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Background, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 224,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 213,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 212,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"YPSvuEn628FKWryzTfWWbRroUiE=\", false, function () {\n  return [useNodesState, useEdgesState];\n});\n_c = App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useCallback","ReactFlow","MiniMap","Controls","Background","useNodesState","useEdgesState","MarkerType","dagre","jsxDEV","_jsxDEV","dagreGraph","graphlib","Graph","setDefaultEdgeLabel","nodeWidth","nodeHeight","dependencies","view","input","getLayoutedElements","nodes","edges","setGraph","rankdir","ranksep","nodesep","forEach","node","setNode","id","width","height","edge","setEdge","source","target","layout","nodeWithPos","position","x","y","draggable","nodeIds","Set","flatMap","d","rawNodes","map","data","label","style","padding","borderRadius","background","color","fontSize","fontWeight","minWidth","maxWidth","display","alignItems","justifyContent","overflowX","whiteSpace","cursor","rawEdges","animated","stroke","strokeWidth","markerEnd","type","ArrowClosed","initialNodes","initialEdges","buildParentMap","parentMap","e","push","getAllAncestors","nodeId","visited","stack","ancestorEdges","length","current","pop","parents","p","has","add","App","_s","setNodes","onNodesChange","setEdges","onEdgesChange","onNodeClick","_","eds","isHighlighted","some","ae","strokeDasharray","children","fitView","nodesDraggable","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["/Users/rishikeshmungase/Desktop/Pubmatic/React/data_trail/src/App.js"],"sourcesContent":["import React, { useCallback } from \"react\";\nimport ReactFlow, {\n  MiniMap,\n  Controls,\n  Background,\n  useNodesState,\n  useEdgesState,\n  MarkerType,\n} from \"reactflow\";\nimport dagre from \"dagre\";\nimport \"reactflow/dist/style.css\";\n\nconst dagreGraph = new dagre.graphlib.Graph();\ndagreGraph.setDefaultEdgeLabel(() => ({}));\n\nconst nodeWidth = 320;\nconst nodeHeight = 80;\n\n// ---- DATA ----\nconst dependencies = [\n  { view: \"AudienceBuyerDaily\", input: \"BuyerETLVA1\" },\n  { view: \"AudienceBuyerDaily\", input: \"BuyerETLVA2\" },\n  { view: \"AudienceBuyerMonthly\", input: \"Audience_Gladiator_Daily_GrpSet_5_pub_geo_aud_plat_ad_uid\" },\n  { view: \"AudienceBuyerMonthly\", input: \"Audience_Gladiator_Daily_GrpSet_6_pub_geo_aud_plat_ad_uid_url\" },\n  { view: \"AudienceBuyerMonthly\", input: \"Audience_Gladiator_Daily_GrpSet_3_aud_uid\" },\n  { view: \"AudienceBuyerMonthly\", input: \"Audience_Gladiator_Daily_GrpSet_4_geo_aud_uid\" },\n  { view: \"AudienceBuyerMonthly\", input: \"Audience_Gladiator_Daily_GrpSet_2_pub_aud_uid\" },\n  { view: \"AudienceBuyerMonthly\", input: \"Audience_Gladiator_Daily_GrpSet_1_pub_geo_aud_uid\" },\n  { view: \"AudienceBuyerContextual\", input: \"Audience_Gladiator_Daily_GrpSet_1_pub_geo_aud_uid\" },\n  { view: \"AudienceBuyerContextual\", input: \"Audience_Gladiator_Daily_GrpSet_2_pub_aud_uid\" },\n  { view: \"AudienceBuyerContextual\", input: \"Audience_Gladiator_Daily_GrpSet_3_aud_uid\" },\n  { view: \"AudienceBuyerContextual\", input: \"Audience_Gladiator_Daily_GrpSet_4_geo_aud_uid\" },\n  { view: \"AudienceBuyerContextual\", input: \"Audience_Gladiator_Daily_GrpSet_5_pub_geo_aud_plat_ad_uid\" },\n  { view: \"AudienceBuyerContextual\", input: \"Audience_Gladiator_Daily_GrpSet_6_pub_geo_aud_plat_ad_uid_url\" },\n  { view: \"BuyerETLVA1\", input: \"FULL_RAW_ETL\" },\n  { view: \"BuyerETLVA2\", input: \"FULL_RAW_ETL\" },\n  { view: \"AudStoreMonthly\", input: \"AudStoreMonthlyLatestUsers\" },\n  { view: \"AudStoreMonthlyPivotMySqlUpload\", input: \"AudStoreMonthly\" },\n  { view: \"AudTrackerHourly\", input: \"RAW_AUD_TRACKER\" },\n  { view: \"ComplexAudienceDaily\", input: \"AudStoreMonthlyLatestUsers\" },\n  { view: \"DomainDataCardinalityReductionDaily\", input: \"ETL_VERIFIED_API\" },\n  { view: \"AudienceDataCardinalityReductionDaily\", input: \"ETL_VERIFIED_API\" },\n  { view: \"AudienceGladiatorCardinalityReductionDaily\", input: \"Audience_Gladiator_ETL_Store_Join\" },\n  { view: \"DomainDataCardinalityReductionCoalesce\", input: \"DomainDataCardinalityReductionDaily\" },\n  { view: \"AudienceDataCardinalityReductionCoalesce\", input: \"AudienceDataCardinalityReductionDaily\" },\n  { view: \"AudienceDataCardinalityReductionCoalesce\", input: \"AudienceGladiatorCardinalityReductionDaily\" },\n  { view: \"Audience_Gladiator_BuyerETLVA1\", input: \"FULL_RAW_ETL\" },\n  { view: \"Audience_Gladiator_BuyerETLVA2\", input: \"FULL_RAW_ETL\" },\n  { view: \"Audience_Gladiator_24HrsETL_Aggr\", input: \"Audience_Gladiator_BuyerETLVA1\" },\n  { view: \"Audience_Gladiator_24HrsETL_Aggr\", input: \"Audience_Gladiator_BuyerETLVA2\" },\n  { view: \"Audience_Gladiator_30DaysAudStore_Aggr\", input: \"AudStoreMonthlyLatestUsers\" },\n  { view: \"Audience_Gladiator_ETL_Store_Join\", input: \"Audience_Gladiator_30DaysAudStore_Aggr\" },\n  { view: \"Audience_Gladiator_ETL_Store_Join\", input: \"Audience_Gladiator_24HrsETL_Aggr\" },\n  { view: \"AudStoreMonthlyLatestUsers\", input: \"AudStoreHourly\" },\n  { view: \"AudStoreMonthlyLatestUsers\", input: \"AudStoreMonthlyLatestUsers\" },\n  { view: \"AudStoreHourly\", input: \"AudStoreHourly\" },\n  { view: \"AudStoreHourly\", input: \"RAW_AUD_LOGGER\" },\n  { view: \"Audience_Gladiator_Daily_GrpSet_5_pub_geo_aud_plat_ad_uid\", input: \"Audience_Gladiator_ETL_Store_Join\" },\n  { view: \"Audience_Gladiator_Daily_GrpSet_6_pub_geo_aud_plat_ad_uid_url\", input: \"Audience_Gladiator_ETL_Store_Join\" },\n  { view: \"Audience_Gladiator_Daily_GrpSet_3_aud_uid\", input: \"Audience_Gladiator_ETL_Store_Join\" },\n  { view: \"Audience_Gladiator_Daily_GrpSet_4_geo_aud_uid\", input: \"Audience_Gladiator_ETL_Store_Join\" },\n  { view: \"Audience_Gladiator_Daily_GrpSet_2_pub_aud_uid\", input: \"Audience_Gladiator_ETL_Store_Join\" },\n  { view: \"Audience_Gladiator_Daily_GrpSet_1_pub_geo_aud_uid\", input: \"Audience_Gladiator_ETL_Store_Join\" },\n  { view: \"Audience_Gladiator_Daily_GrpSet_5_pub_geo_aud_plat_ad_uid\", input: \"AudienceBuyerDaily\" },\n  { view: \"Audience_Gladiator_Daily_GrpSet_6_pub_geo_aud_plat_ad_uid_url\", input: \"AudienceBuyerDaily\" },\n  { view: \"Audience_Gladiator_Daily_GrpSet_3_aud_uid\", input: \"AudienceBuyerDaily\" },\n  { view: \"Audience_Gladiator_Daily_GrpSet_4_geo_aud_uid\", input: \"AudienceBuyerDaily\" },\n  { view: \"Audience_Gladiator_Daily_GrpSet_2_pub_aud_uid\", input: \"AudienceBuyerDaily\" },\n  { view: \"Audience_Gladiator_Daily_GrpSet_1_pub_geo_aud_uid\", input: \"AudienceBuyerDaily\" },\n];\n\n// ---- DAG LAYOUT ----\nconst getLayoutedElements = (nodes, edges) => {\n  dagreGraph.setGraph({ rankdir: \"TB\", ranksep: 150, nodesep: 80 });\n\n  nodes.forEach((node) => {\n    dagreGraph.setNode(node.id, { width: nodeWidth, height: nodeHeight });\n  });\n\n  edges.forEach((edge) => {\n    dagreGraph.setEdge(edge.source, edge.target);\n  });\n\n  dagre.layout(dagreGraph);\n\n  nodes.forEach((node) => {\n    const nodeWithPos = dagreGraph.node(node.id);\n    node.position = {\n      x: nodeWithPos.x - nodeWidth / 2,\n      y: nodeWithPos.y - nodeHeight / 2,\n    };\n    node.draggable = true;\n  });\n\n  return { nodes, edges };\n};\n\n// ---- BUILD NODES & EDGES ----\nconst nodeIds = [...new Set(dependencies.flatMap((d) => [d.view, d.input]))];\n\nconst rawNodes = nodeIds.map((id) => ({\n  id,\n  data: { label: id },\n  position: { x: 0, y: 0 },\n  style: {\n    padding: 10,\n    borderRadius: 8,\n    background: \"linear-gradient(135deg, #667eea 0%, #764ba2 100%)\",\n    color: \"black\",\n    fontSize: 15,\n    fontWeight: 600,\n    minWidth: nodeWidth,\n    maxWidth: 620,\n    height: nodeHeight,\n    display: \"flex\",\n    alignItems: \"center\",\n    justifyContent: \"center\",\n    overflowX: \"auto\",\n    whiteSpace: \"nowrap\",\n    cursor: \"grab\",\n  },\n}));\n\nconst rawEdges = dependencies.map((d) => ({\n  id: `e-${d.input}->${d.view}`,\n  source: d.input,\n  target: d.view,\n  animated: false,\n  style: { stroke: \"grey\", strokeWidth: 2 },\n  markerEnd: { type: MarkerType.ArrowClosed, color: \"grey\" },\n}));\n\n// apply dagre layout once at the start\nconst { nodes: initialNodes, edges: initialEdges } = getLayoutedElements(\n  rawNodes,\n  rawEdges\n);\n\n// ---- UTILS FOR HIGHLIGHT ----\nconst buildParentMap = (edges) => {\n  const parentMap = {};\n  edges.forEach((e) => {\n    if (!parentMap[e.target]) parentMap[e.target] = [];\n    parentMap[e.target].push(e.source);\n  });\n  return parentMap;\n};\n\nconst getAllAncestors = (nodeId, parentMap) => {\n  const visited = new Set();\n  const stack = [nodeId];\n  const ancestorEdges = [];\n\n  while (stack.length > 0) {\n    const current = stack.pop();\n    const parents = parentMap[current] || [];\n    parents.forEach((p) => {\n      ancestorEdges.push({ source: p, target: current });\n      if (!visited.has(p)) {\n        visited.add(p);\n        stack.push(p);\n      }\n    });\n  }\n\n  return ancestorEdges;\n};\n\n// ---- MAIN APP ----\nexport default function App() {\n  const [nodes, setNodes, onNodesChange] = useNodesState(initialNodes);\n  const [edges, setEdges, onEdgesChange] = useEdgesState(initialEdges);\n\n  const parentMap = buildParentMap(initialEdges);\n\n  const onNodeClick = useCallback(\n    (_, node) => {\n      const ancestorEdges = getAllAncestors(node.id, parentMap);\n\n      setEdges((eds) =>\n        eds.map((e) => {\n          const isHighlighted = ancestorEdges.some(\n            (ae) => ae.source === e.source && ae.target === e.target\n          );\n\n          if (isHighlighted) {\n            return {\n              ...e,\n              animated: true,\n              style: {\n                stroke: \"red\",\n                strokeWidth: 4,\n                strokeDasharray: \"5 5\",\n              },\n              markerEnd: { type: MarkerType.ArrowClosed, color: \"violet\" },\n            };\n          }\n\n          return {\n            ...e,\n            animated: false,\n            style: { stroke: \"grey\", strokeWidth: 2 },\n            markerEnd: { type: MarkerType.ArrowClosed, color: \"grey\" },\n          };\n        })\n      );\n    },\n    [setEdges, parentMap]\n  );\n\n  return (\n    <div style={{ width: \"100vw\", height: \"100vh\" }}>\n      <ReactFlow\n        nodes={nodes}\n        edges={edges}\n        onNodesChange={onNodesChange}\n        onEdgesChange={onEdgesChange}\n        onNodeClick={onNodeClick}\n        fitView\n        nodesDraggable\n      >\n        <MiniMap />\n        <Controls />\n        <Background />\n      </ReactFlow>\n    </div>\n  );\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}